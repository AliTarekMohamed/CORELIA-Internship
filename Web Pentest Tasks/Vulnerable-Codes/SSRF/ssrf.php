<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSRF</title>
</head>

<body>
    <h1>Products</h1>
    <p>Price: $85</p>
    <img src="img.jpg"><br><br>

    <form action="" method="get">
        <input type="text" name="url" value="http://localhost/Vulnerable-Codes/SSRF/stock.php" hidden>
        <button name="check">Check Stock</button>
    </form>
    <br>
</body>
<?php
if (isset($_GET['check'])) {
    $url = $_GET['url'];

    $curl_session = curl_init();
    curl_setopt($curl_session, CURLOPT_URL, $url);
    curl_exec($curl_session);
    echo "<span> Units</span>";
}

/*
curl_init() => This initializes a new curl session and returns a curl handle (stored in $curl_session).
            => Think of it as opening a connection that you can configure before sending the actual request.

curl_setopt() => This sets an option for the curl session.
              => It sets the URL to which the request will be sent.

curl_exec() => This executes the cURL session with all the options you configured.
            => It actually sends the HTTP request to the given URL.
            => By default, the result is printed directly to the browser.

*/
?>

</html>